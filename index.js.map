{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48983342-f944feb478e2b8c4cd8b85956';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (searchQuery, page = 1, perPage = 40) => {\n  if (!searchQuery.trim()) {\n    throw new Error('Search query cannot be empty.');\n  }\n\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw error;\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const displayImages = (images, append = false) => {\n  const gallery = document.querySelector('.gallery');\n\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n\n  if (!images || images.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  const imageElements = images.map(createImageCard);\n  gallery.append(...imageElements);\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};\n\nconst createImageCard = image => {\n  const card = document.createElement('div');\n  card.classList.add('photo-card');\n\n  const link = document.createElement('a');\n  link.href = image.largeImageURL;\n\n  const img = document.createElement('img');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n\n  const info = document.createElement('div');\n  info.classList.add('info');\n\n  const likes = createInfoElement('Likes', image.likes);\n  const views = createInfoElement('Views', image.views);\n  const comments = createInfoElement('Comments', image.comments);\n  const downloads = createInfoElement('Downloads', image.downloads);\n\n  info.append(likes, views, comments, downloads);\n  link.appendChild(img);\n  card.append(link, info);\n\n  return card;\n};\n\nconst createInfoElement = (label, value) => {\n  const p = document.createElement('p');\n  p.innerHTML = `<b>${label}:</b> ${value}`;\n  return p;\n};\n\nexport const showLoadingIndicator = () => {\n  const loader = document.querySelector('.loader');\n  loader.textContent = 'Loading...';\n  loader.classList.add('visible');\n};\n\nexport const hideLoadingIndicator = () => {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('visible');\n};\n\nexport const showErrorNotification = error => {\n  iziToast.error({\n    title: 'Error',\n    message: `Something went wrong: ${error.message}`,\n  });\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport {\n  displayImages,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n} from './js/render-functions';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('#search-input');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\nconst handleSearch = async event => {\n  event.preventDefault();\n\n  currentQuery = searchInput.value.trim();\n  if (!currentQuery) {\n    iziToast.warning({ message: 'Please enter a search term.' });\n    return;\n  }\n\n  currentPage = 1;\n  loadMoreBtn.classList.add('hidden');\n\n  showLoadingIndicator();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    totalHits = data.totalHits;\n\n    if (totalHits === 0) {\n      iziToast.info({ message: 'No images found. Try another keyword!' });\n      return;\n    }\n\n    displayImages(data.hits);\n\n    if (currentPage * perPage < totalHits) {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({ message: `Something went wrong: ${error.message}` });\n  } finally {\n    hideLoadingIndicator();\n  }\n};\n\nconst handleLoadMore = async () => {\n  currentPage++;\n\n  showLoadingIndicator();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    displayImages(data.hits, true);\n\n    scrollPage();\n\n    if (currentPage * perPage >= totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({ message: `Something went wrong: ${error.message}` });\n  } finally {\n    hideLoadingIndicator();\n  }\n};\n\nconst scrollPage = () => {\n  const firstCard = document.querySelector('.gallery .photo-card');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","page","perPage","data","axios","error","displayImages","images","append","gallery","iziToast","imageElements","createImageCard","SimpleLightbox","image","card","link","img","info","likes","createInfoElement","views","comments","downloads","label","value","p","showLoadingIndicator","loader","hideLoadingIndicator","searchForm","searchInput","loadMoreBtn","currentQuery","currentPage","totalHits","handleSearch","event","handleLoadMore","scrollPage","firstCard","cardHeight"],"mappings":"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"}